<div class="h-full flex flex-col overflow-hidden">
    <!-- Sticky Header -->
    <app-header title="The Conviction"></app-header>

    <!-- Content Area -->
    <div class="flex-grow p-4 overflow-hidden flex flex-col min-h-0">
        <div class="flex-grow bg-detective-cream paper-shadow rounded-sm p-5 flex flex-col overflow-hidden">
            <!-- Scrollable Middle -->
            <div class="flex-grow overflow-y-auto scrollbar-none space-y-6 pr-1 mb-4">
                <div class="bg-black/5 p-4 border-l-4 border-detective-red flex-none">
                    <p class="font-body text-xs text-[#2D1B1B] italic leading-relaxed">
                        "We've tracked them down, Agent. Only one individual lacks a verifiable alibi for the night of
                        the
                        theft."
                    </p>
                </div>

                <!-- Final Selection Grid -->
                <div class="grid grid-cols-2 gap-4 content-start">
                    @for (suspect of suspects(); track suspect.id) {
                    <div class="relative flex flex-col items-center">
                        <div class="polaroid w-full transition-all duration-500" [class.ring-4]="!suspect.isEliminated"
                            [class.ring-detective-red]="!suspect.isEliminated"
                            [class.shadow-2xl]="!suspect.isEliminated" [class.z-10]="!suspect.isEliminated"
                            [class.scale-105]="!suspect.isEliminated">

                            <div class="relative aspect-square overflow-hidden bg-black">
                                <img [src]="suspect.avatar" [alt]="suspect.name"
                                    class="w-full h-full object-cover grayscale brightness-125 contrast-150 transition-all duration-1000"
                                    [class.opacity-30]="suspect.isEliminated"
                                    [class.brightness-50]="suspect.isEliminated">

                                @if (suspect.isEliminated) {
                                <div class="absolute inset-0 flex items-center justify-center p-1 pointer-events-none">
                                    <div
                                        class="stamp border-2 border-red-800 text-red-800 text-[8px] -rotate-[25deg] uppercase text-center bg-white/10 px-1 font-bold">
                                        {{ suspect.eliminationReason || 'ALIBI VERIFIED' }}</div>
                                </div>
                                } @else {
                                <div
                                    class="absolute inset-0 border-4 border-detective-red animate-pulse pointer-events-none">
                                </div>
                                }
                            </div>
                            <p class="mt-2 text-[10px] font-body text-center font-bold uppercase transition-colors"
                                [class.text-detective-red]="!suspect.isEliminated"
                                [class.text-[#2D1B1B]/40]="suspect.isEliminated">
                                {{ suspect.name }}
                            </p>
                        </div>
                    </div>
                    }
                </div>
            </div>

            <!-- Sticky Actions within the Paper -->
            <div class="flex-none pt-4 border-t border-[#2D1B1B]/10">
                <button routerLink="/success"
                    class="w-full bg-detective-red text-white font-heading py-4 text-xl uppercase tracking-widest shadow-lg hover:bg-detective-red-dark transition-all animate-pulse">
                    Confirm Culprit
                </button>
            </div>
        </div>
    </div>
</div>